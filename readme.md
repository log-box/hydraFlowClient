
# Hydra Flow Client

## ะะฟะธัะฐะฝะธะต

**Hydra Flow Client** โ ััะพ ะธะฝัะตััะตะนั ะดะปั ัะตััะธัะพะฒะฐะฝะธั OAuth2-ััะตะฝะฐัะธะตะฒ ะฝะฐ ะฑะฐะทะต [ORY Hydra](https://www.ory.sh/hydra/). ะะพะดะดะตัะถะธะฒะฐะตั `Authorization Code Flow` ั ะฟะพะปะฝะพัะตะฝะฝะพะน ะพะฑัะฐะฑะพัะบะพะน login / consent / logout ัะตัะตะท ะฒะตะฑ-ะธะฝัะตััะตะนั.

ะะตะฐะปะธะทะพะฒะฐะฝ ะบะฐะบ **UI-ะบะปะธะตะฝั**, ะฐ ะฝะต API: ะธัะฟะพะปัะทัะตััั ะฒะธะทัะฐะปัะฝะฐั ัะพัะผะฐ ะปะพะณะธะฝะฐ, ะพะบะฝะพ ัะพะณะปะฐัะธั, ัััะฐะฝะธัั ะทะฐะฒะตััะตะฝะธั ัะตััะธะธ ะธ ะพัะปะฐะดะบะธ ัะพะบะตะฝะพะฒ.

---

## ะขัะตะฑะพะฒะฐะฝะธั

- Docker
- **Docker Compose ะฒะตััะธะธ 2 ะธะปะธ ะฒััะต**

ะัะพะฒะตัะธัั:
```bash
docker compose version
```

ะัะปะธ ั ะฒะฐั ะธัะฟะพะปัะทัะตััั `docker-compose` ั ะดะตัะธัะพะผ, ะพะฑะฝะพะฒะธัะตัั ะดะพ [Compose v2](https://docs.docker.com/compose/install/linux/).

---

## ะะฐะฟััะบ

```bash
git clone https://your-repo-url/hydraFlowClient.git
cd hydraFlowClient
cp .env.example .env
docker compose up --build
```

ะะฝัะตััะตะนั ะฑัะดะตั ะดะพัััะฟะตะฝ ะฟะพ ะฐะดัะตัั:  
๐ `http://localhost:8000/login`

---

## UI-ะธะฝัะตััะตะนั

ะะตะฑ-ะธะฝัะตััะตะนั ะฒะบะปััะฐะตั ัะปะตะดัััะธะต ัััะฐะฝะธัั:
- ะกััะฐะฝะธัั ะธะฝะธัะธะฐะปะธะทะฐัะธะธ ะทะฐะฟัะพัะฐ
- ะกััะฐะฝะธัั loginRequest
- ะกััะฐะฝะธัั consentRequest
- ะกััะฐะฝะธัั ะฒะธััะธะฝั, ั ะฟะพะปััะตะฝะฝัะผะธ ัะพะบะตะฝะฐะผะธ ะธะปะธ ะพัะธะฑะบะพะน
  - ะะฐะปะธะดะฐัะธั JWT ัะตะฐะปะธะทะพะฒะฐะฝะฐ
- ะกััะฐะฝะธัั logoutRequest
- ะกััะฐะฝะธัั postLogoutRedirect

---

## ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
hydraFlowClient/
โโโ .env
โโโ docker-compose.yml
โโโ Dockerfile
โโโ app/
โ   โโโ main.py
โ   โโโ config.py
โ   โโโ logger.py
โ   โโโ schemas.py
โ   โโโ api/
โ   โ   โโโ login.py
โ   โ   โโโ consent.py
โ   โ   โโโ logout.py
โ   โ   โโโ redirect.py
โ   โโโ core/
โ   โ   โโโ context.py
โ   โ   โโโ context_storage.py
โ   โ   โโโ hydra.py
โ   โ   โโโ token_payload.py
โ   โ   โโโ database.py
โ   โโโ static/
โ   โ   โโโ login.html
โ   โ   โโโ consent.html
โ   โ   โโโ logout.html
โ   โ   โโโ logout_successful.html
โ   โโโ templates/
โ       โโโ redirect_result.html.jinja
โโโ hydra/config/hydra.yml
โโโ init/createClients.py
โโโ nginx/etc/nginx/conf.d/
โโโ logs/
```

---

## ะขะตััะธัะพะฒะฐะฝะธะต ััะตะฝะฐัะธะตะฒ

Hydra Flow Client ะผะพะถะฝะพ ะธัะฟะพะปัะทะพะฒะฐัั ะดะปั ัััะฝะพะน ะพัะปะฐะดะบะธ:

- ะะพะปััะตะฝะธั ัะพะบะตะฝะพะฒ ัะตัะตะท ะฑัะฐัะทะตั
- ะัะพะฒะตัะบะธ ัะฐะฑะพัั logout ะธ ะพัะธััะบะธ ัะตััะธะน
- ะะธะทัะฐะปัะฝะพะณะพ ะฐะฝะฐะปะธะทะฐ JWT payload
- ะะตะผะพะฝัััะฐัะธะธ `auth code flow` ั UI-ะธะฝัะตััะตะนัะพะผ

ะะพัะพะฒัะน ัะตัะฒะธั ะผะพะถะฝะพ ะฟัะพัะตััะธัะพะฒะฐัั ะฟะพ [ัััะปะบะต](http://logbox.myddns.me:3001)