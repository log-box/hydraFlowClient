–û—Ç–ª–∏—á–Ω–æ, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ–ø–µ—Ä—å —è—Å–Ω–∞. –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π `README.md` –¥–ª—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è `hydraFlowClient` —Å —É—á—ë—Ç–æ–º —Ç–µ–∫—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –ª–æ–≥–∏–∫–∏ –±—É–¥–µ—Ç —Ç–∞–∫–∏–º:

---

# Hydra Flow Client

FastAPI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, —Ä–µ–∞–ª–∏–∑—É—é—â–µ–µ –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Ñ–æ—Ä–º—ã –≤—Ö–æ–¥–∞, —Å–æ–≥–ª–∞—Å–∏—è –∏ –ª–æ–≥–∞—É—Ç–∞ –¥–ª—è ORY Hydra —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ä—É—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤. –ü—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–æ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É OAuth2/OpenID Connect, —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Å–≤—è–∑–∫–µ —Å Hydra.

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ app
‚îÇ   ‚îú‚îÄ‚îÄ api                 # FastAPI —Ä–æ—É—Ç–µ—Ä—ã: login, consent, logout, redirect
‚îÇ   ‚îú‚îÄ‚îÄ core                # –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å Hydra (core/hydra.py)
‚îÇ   ‚îú‚îÄ‚îÄ static              # HTML-—Ñ–æ—Ä–º—ã: login.html, consent.html –∏ –¥—Ä.
‚îÇ   ‚îú‚îÄ‚îÄ config.py           # –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ logger.py           # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ main.py             # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ FastAPI
‚îÇ   ‚îî‚îÄ‚îÄ schemas.py          # Pydantic-—Å—Ö–µ–º—ã
‚îú‚îÄ‚îÄ hydra
‚îÇ   ‚îî‚îÄ‚îÄ config
‚îÇ       ‚îî‚îÄ‚îÄ hydra.yml       # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ORY Hydra
‚îú‚îÄ‚îÄ init
‚îÇ   ‚îî‚îÄ‚îÄ init-hydra.sh       # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤ Hydra
‚îú‚îÄ‚îÄ .env                    # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è FastAPI
‚îú‚îÄ‚îÄ Dockerfile              # –°–±–æ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ docker-compose.yml      # –ü–æ–¥–Ω—è—Ç–∏–µ Hydra, Postgres –∏ FastAPI
‚îú‚îÄ‚îÄ hydra-client.service    # Systemd unit (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îú‚îÄ‚îÄ hydra-client-docker.sh  # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ –∏–∑ Docker
‚îú‚îÄ‚îÄ requirements.txt
‚îî‚îÄ‚îÄ readme.md               # –í—ã –∑–¥–µ—Å—å üìñ
```

## üöÄ –ó–∞–ø—É—Å–∫

```bash
docker-compose up --build
```

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–µ—Ä–≤–∏—Å—ã –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ –ø–æ—Ä—Ç–∞—Ö:

* FastAPI UI: [http://localhost:3000](http://localhost:3000)
* Hydra Admin: [http://localhost:4445](http://localhost:4445)
* Hydra Public: [http://localhost:4444](http://localhost:4444)

## üîê –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (`.env`)

```env
HYDRA_URL=http://hydra:4444
HYDRA_PRIVATE_URL=http://hydra:4445
HYDRA_OUTSIDE_URL=http://localhost:4444

CLIENT_ID=...
CLIENT_ID_SECOND=...
REDIRECT_URI=...
POST_LOGOUT_REDIRECT_URI=...

LOGIN_SUBJECT=...
LOGIN_CREDENTIAL=...
LOGIN_ACR=...
LOGIN_AMR=...
LOGIN_CONTEXT={"key": "value"}
EXTEND_SESSION_LIFESPAN=true
REMEMBER=true
REMEMBER_FOR=0

CONSENT_CONTEXT={"key": "value"}
GRANT_ACCESS_TOKEN_AUDIENCE=...
GRANT_SCOPE=openid,offline
SESSION_ID_TOKEN={"claim": "value"}
SESSION_ACCESS_TOKEN={"claim": "value"}
```

## üìã –§–æ—Ä–º—ã

* `/login?login_challenge=...` ‚Äì —Ñ–æ—Ä–º–∞ –≤—Ö–æ–¥–∞
* `/consent?consent_challenge=...` ‚Äì —Ñ–æ—Ä–º–∞ —Å–æ–≥–ª–∞—Å–∏—è
* `/logout?logout_challenge=...` ‚Äì —Ñ–æ—Ä–º–∞ –≤—ã—Ö–æ–¥–∞
* `/redirect-uri` ‚Äì —Ç–æ—á–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Ä—É—á–Ω–æ–π –≤–≤–æ–¥ JSON-–ø–æ–ª–µ–π –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ—Ç–∫–∞–∑ —Å –∑–∞–¥–∞–Ω–∏–µ–º `error` –∏ `error_description`.

## üí¨ API

FastAPI-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:

* `GET /login_settings` ‚Äì –ø–æ–ª—É—á–∏—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è —Ñ–æ—Ä–º—ã –≤—Ö–æ–¥–∞
* `POST /login_process` ‚Äì –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ª–æ–≥–∏–Ω–∞ –∏–ª–∏ –æ—Ç–∫–∞–∑–∞
* `GET /consent_settings` ‚Äì –ø–æ–ª—É—á–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ–≥–ª–∞—Å–∏—è
* `POST /consent_process` ‚Äì –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–≥–ª–∞—Å–∏—è –∏–ª–∏ –æ—Ç–∫–∞–∑–∞
* `GET /logout` ‚Äì —Ñ–æ—Ä–º–∞ –ª–æ–≥–∞—É—Ç–∞
* `GET /redirect-uri` ‚Äì —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –ø–æ—Å–ª–µ –ª–æ–≥–∏–Ω–∞ –∏–ª–∏ –æ—à–∏–±–∫–∏

## üõ† Dev Notes

* –°—Ç–∞—Ç–∏–∫–∞ –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ –ø—É—Ç–∏ `/static`
* Uvicorn –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å `--reload` –¥–ª—è hot-reload
* –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–æ –Ω–∞ API (–ø–æ –≤–∏–¥–∞–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π) –∏ Core (–ª–æ–≥–∏–∫–∞ —Å Hydra)

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –æ—Ç–∫–∞–∑–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –Ω–∞–∂–∞—Ç—å "–û—Ç–º–µ–Ω–∞" –∏ –∑–∞–¥–∞—Ç—å –ø–æ–ª—è `error` –∏ `error_description`. –û–Ω–∏ –±—É–¥—É—Ç –ø–µ—Ä–µ–¥–∞–Ω—ã Hydra –∏ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω—ã –≤ `/redirect-uri`.

---

–ù—É–∂–Ω–∞ —Ç–∞–∫–∂–µ –≤–µ—Ä—Å–∏—è –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º ‚Äî —Å–∫–∞–∂–∏, –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–ª—é.
